extends ../admin-layout
block content
    .admin-title 修改密码
    .user-info-container

        form.form-horizontal#user-form(role="form",method="post" ,action="/admin/customer/changePassword")
            if error
                .form-group
                    .col-md-4.col-md-offset-1.err-alert
                        i.glyphicon.glyphicon-minus-sign
                        span  #{error}
            if success
                .form-group
                    .col-md-4.col-md-offset-1.success-alert
                        i.glyphicon.glyphicon-ok-sign
                        span  #{success}
            .form-group
                label.col-md-2.control-label 原密码
                .col-md-3
                    input.form-control(type="password" value="" name="password" required)
            .form-group
                label.col-md-2.control-label 新密码
                .col-md-3
                    input.form-control(type="password" value="" name="new" required)
            .form-group.has-feedback
                label.col-md-2.control-label 确认密码
                .col-md-3
                    input.form-control(type="password" name="configure" required)
                    span.glyphicon.form-control-feedback
                .col-md-2
                    p.form-control-static.text-danger
            .form-group
                label.col-md-2.control-label
                .col-md-3
                    button.btn.btn-danger.btn-sm 保存修改
    script.
        $(function () {
            var $new_pwd=$('input[name=new]');
            var $config_pwd=$('input[name=configure]');
            $new_pwd.on('keyup',function (e) {
                var v=e.target.value;
                var c=$config_pwd.val();
                if(c){
                    if(v==c){
                        $('.form-control-feedback').removeClass('glyphicon-info-sign');$('.text-danger').text('')
                    }else {
                        $('.form-control-feedback').addClass('glyphicon-info-sign');$('.text-danger').text('两次密码不一致')
                    }
                }
            })
            $config_pwd.on('keyup', function (e) {
                var v = e.target.value;
                var c = $new_pwd.val();
                if (c) {
                    if (v==c) {
                        $('.form-control-feedback').removeClass('glyphicon-info-sign');
                        $('.text-danger').text('')
                    } else {
                        $('.form-control-feedback').addClass('glyphicon-info-sign');
                        $('.text-danger').text('两次密码不一致')
                    }
                }
            })
        })





